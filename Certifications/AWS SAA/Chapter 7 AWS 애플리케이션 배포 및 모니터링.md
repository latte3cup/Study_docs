#### AWS Lambda
- 각종 이벤트에 반응해 백엔드 코드를 실행하는 컴퓨팅 리소스를 제공하는 `서버리스` 서비스
- 현재 1ms 단위 요금 부과 + 요청 백만건 부터 부과

##### 서버리스의 조건
1. 인프라 관리 필요성 일절 없음
2. 확장성 : 스케일 업 / 다운 지원 및 가능 해야함. (일반적으로 자동적으로)
3. 내재된 중복 구현성 : 항상 고가용성 유지할 수 있어야 함.
4. 사용량에 따른 과금 : 오직 사용만에만 부과되며 유휴된 어떠한 자원에서는 과금 받지 않음

###### AWS 주요 서버리스 서비스
	- Amazon S3
	- Amazon DynamoDB 
	- Amazon Api Gateway
	- AWS Lambda
	- Amazon SNS and SQS
	- Amazon CloudWatch Events
	- Amazon Kinesis

##### Lambda의 개요
- 가장 단순한 아킻텍처를 보여줌. 이벤트 소스 -> 이벤트 -> 람다 실행 -> 서비스 작동(무엇이든)
- 병렬적으로도 실행가능. 함수 갯수 제한 없음
- Stateless 속성을 가지므로 운영 단순성, 격리된 보안성, 무한확장성, 비용최적화의 장점
- 보통의 프로그래밍 코드를 작성하여 기능 사용 

##### 람다 사용 단계
1. 코드 준비 : 원하는 언어로 함수 코드 작성  
2. 함수에 롤을 추가하거나 함수에 필요한 롤을 생성
3. 함수를 생성한 뒤 Lambda 함수를 호출하기 위한 트리거 추가
4. 실행 및 테스트
5. 모니터링 및 운영

###### Lambda가 지원하는 네이티브 언어
	- java
	- Node.js
	- Python
	- C#
	- Go
	- Powershell
	- Ruby
###### 리소스 용량 제한
| 항목                           | 제한 값                                                   |
| ---------------------------- | ------------------------------------------------------ |
| **메모리 (Memory)**             | 최소 **128 MB** ~ 최대 **10 240 MB (10GB)**, 1 MB 단위 조정 가능 |
| **CPU (vCPU)**               | 메모리 크기에 비례해 자동 할당, 최대 약 **6 vCPU**                     |
| **실행 시간 (Timeout)**          | 기본값 **3초**, 최대 **900초 (15분)**                          |
| **임시 스토리지 (/tmp)**           | 기본 **512MB**, 확장 시 최대 **10GB**                         |
| **환경 변수 (Environment Vars)** | 최대 **4KB**                                             |
| **배포 패키지 (코드 + 라이브러리)**      | ZIP 업로드: **50MB** / S3 업로드: **250MB**                  |
| **Lambda 레이어 (Layer)**       | 함수당 최대 **5개**, 각 레이어는 **50MB** 한도                      |
| **동시 실행 (Concurrency)**      | 기본 **1,000**, 요청 시 증가 가능                               |
| **코드 저장소 총량**                | 리전(Region)당 최대 **75GB**                                |
| **파일 디스크립터/스레드**             | 각 **1,024개** 제한                                        |
| **ENI (VPC 연결 시)**           | 함수당 최대 **500개**                                        |

###### 람다에 적합한 패턴
1. 실시간 파일 데이터 처리
2. 실시간 스트렘 데이터 처리
3. ETL 작업
4. Cron 대체 : 크론식으로 함수 실행 가능
5. Aws Events 처리

---

#### Amazon API Gateway - 서버리스
- WS에서 완전관리형(Managed Service)으로 제공하는 API 게이트웨이. 서버를 직접 띄우지 않고, AWS가 인프라를 운영.
- 백엔드 HTTP  엔드포인트, AWS 람다 함수 또는 기타 AWS 서비스에 연결하기 위한 레스트풀 API 생성, 배포 관리
- 프론트엔드 HTTP 엔드포인트를 통해 외부로 노출된 API 호출 (즉 외부 공개 API)
- API 호출 및 전송된 데이터의 양에 따라 과금 
- 지원하는 API 유형
	1. REST API : 사용량 계획, API 키, API 배포 및 수익화 등 다양한 관리 기능 제공
	2. WebSocket API : 클라이언트와 지속형 연결 유지 기능 제공
	3. Http API : 람다함수 또는 HTTP 백엔드의 프록시 역할을 하는 API 구현에 최적화.
- 장점
	1. 확장성과 관리 효율
		- **완전관리형 서비스**라 서버 인프라 구성 및 확장, 운영체제·보안 패치 관리가 불필요
		- **대규모 동시 호출** 처리: 수백만 건의 API 호출도 효과적으로 처리 가능 
	2. 다양한 인증·보안 기능
		- **IAM 역할(Auth)**, **Lambda Authorizer**, **Amazon Cognito** 등 다양한 인증 방식 지원 
		- **AWS WAF(Web Application Firewall)**로 API에 대한 방화벽 규칙 적용 가능 
	3. 모니터링 및 배포 지원
		- **CloudWatch**를 통한 호출 수, 지연 시간, 오류율 등 다양한 메트릭 모니터링 가능
		- **캔더리(추단계) 배포**를 통해 안전하게 새로운 버전 배포 가능
	4. 비용 및 성능 최적화 (HTTP APIs)
		- HTTP APIs는 **REST APIs보다 비용이 낮고 지연도 짧음**
		- **자동 배포(auto deploy)**, **CORS (Cross-Origin Resource Sharing)** 지원 자동화
	5. 백엔드 통합 유연성
		- AWS Lambda, EC2, ECS, 외부 HTTP 엔드포인트, VPC 내부의 ALB/NLB, Cloud Map 등 다양한 백엔드로 통합 가능
		- 특히 HTTP APIs는 private integration (VPC 환경의 로드밸런서 포함)도 지원
	6. 라이플 사이클 관리
		- 동일한 API의 다양한 버전 관리 가능
	7. Open API 명세서 (Swagger)(2.0) 및 3.0 지원
	8. iOS, Android, JavaScript용  SDK 지원으로 API-Gateway 관리 및 제어가능

--- 
